(()=>{"use strict";let e=document.getElementById("content");function t(){let t=document.createElement("form");t.classList.add("inputinfo");let n=document.createElement("h3");n.textContent="Task name";let l=document.createElement("INPUT");l.setAttribute("type","text"),l.classList.add("titleinputvalue");let o=document.createElement("h3");o.textContent="description";let c=document.createElement("TEXTAREA");c.classList.add("descriptioninputvalue");let a=document.createElement("h3");a.textContent="Due Date";let r=document.createElement("INPUT");r.setAttribute("type","date"),r.classList.add("dateinputvalue");let s=document.createElement("h3");s.textContent="Priority";let d=document.createElement("SELECT"),i=document.createElement("option");i.value="1",i.text="priority 1 (Red)";let u=document.createElement("option");u.value="2",u.text="priority 2 (Yellow)";let p=document.createElement("option");p.value="3",p.text="priority 3 (Green)",d.add(i,null),d.add(u,null),d.add(p,null),d.classList.add("priorityinputvalue");let m=document.createElement("h3");m.textContent="Notes";let E=document.createElement("TEXTAREA");E.classList.add("notesinputvalue");let f=document.createElement("button");f.textContent="Create",f.classList.add("submitbtn","submitbtninfo");let y=document.createElement("button");y.textContent="Cancel",y.classList.add("cancelbtn","cancelbtninfo"),t.append(n),t.append(l),t.append(o),t.append(c),t.append(a),t.append(r),t.append(s),t.append(d),t.append(m),t.append(E),t.append(y),t.append(f),e.append(t)}t(),function(){let t=document.createElement("form");t.classList.add("projectform");let n=document.createElement("h3");n.textContent="Project name";let l=document.createElement("input");l.setAttribute("type","text"),l.id="projectnamefield";let o=document.createElement("button");o.textContent="Create",o.classList.add("submitbtn","submitbtnproject");let c=document.createElement("button");c.textContent="Cancel",c.classList.add("cancelbtn","cancelbtnproject"),t.append(n),t.append(l),t.append(c),t.append(o),e.append(t)}(),function(){let t=document.createElement("div");t.classList.add("interface");let n=document.createElement("div");n.classList.add("projects"),n.id="projects";let l=document.createElement("div");l.classList.add("details"),l.id="details",t.append(n),t.append(l),e.append(t)}(),function(){let t=document.createElement("div");t.classList.add("nameerrorpopup");let n=document.createElement("p");n.textContent="A folder with this name already exists";let l=document.createElement("button");l.textContent="close",t.append(n),t.append(l),e.append(t),l.addEventListener("click",(()=>{t.classList.remove("spawn")}))}();let n=document.querySelector("#projects");const l=(()=>{let e=[{projectTitle:"Default project folder",tasks:[{title:"Task one",description:"this task goes like this",dueDate:"2021-07-22",priority:"2",notes:"these are the notes",checklist:!1},{title:"Task Two",description:"this task goes like this",dueDate:"2021-07-22",priority:"2",notes:"these are the notes",checklist:!1},{title:"Task three",description:"this task goes like this and this",dueDate:"2021-03-26",priority:"1",notes:"these are the notes for this other one",checklist:!1}]}];return{createProject(t){e.push({ourProjectTitle:t,tasks:[]})},newTask(t,n,l,o,c,a=!1,r){let s={title:t,description:n,dueDate:l,priority:o,notes:c,checklist:a};for(let t=0;t<e.length;t++)e[t].projectTitle==r&&e[t].tasks.push(s)},getList:()=>e,getFolderName:()=>e.map((e=>e.projectTitle)),getTitle(t){for(let n=0;n<e.length;n++)if(e[n].projectTitle==t)return e[n].tasks.map((e=>e.title))},getTask(t,n){for(const l of e)if(l.projectTitle==n)for(const e of l.tasks)if(e.title==t)return e},getLastProjectTitle:()=>e[e.length-1].projectTitle,renderProjects(){let t=document.querySelector(".projects"),n=e;for(let e=0;e<n.length;e++){let l=document.createElement("div"),o=document.createElement("button"),c=document.createElement("div");c.classList.add("content"),o.classList.add("collapsible"),o.textContent=n[e].projectTitle,l.id=e,l.classList.add("projectdiv"),l.append(o),l.append(c),t.append(l)}let l=document.createElement("button");l.textContent="+ Add Project",l.classList.add("newprojectbtn"),t.append(l)},renderTasksCollapsibleContainer(){var e=document.querySelectorAll(".collapsible");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(function(){this.classList.toggle("active");var e=this.nextElementSibling;"block"===e.style.display?e.style.display="none":e.style.display="block"}))},renderTasksTittle(){var e=document.querySelectorAll(".collapsible");for(let t=0;t<e.length;t++){let n=e[t].textContent,o=l.getTitle(n);for(let n=0;n<o.length;n++){let l=document.createElement("h3");l.textContent=String(o[n]),l.classList.add("pointerstyle"),l.setAttribute("data-folder",e[t].textContent),e[t].nextElementSibling.append(l)}let c=document.createElement("button");c.textContent="+ Add Task",c.classList.add("newtaskbtn"),e[t].nextElementSibling.append(c)}},renderTasksDetail(e,t){let n=document.querySelector(".details"),o=l.getTask(e,t),c=document.createElement("div");c.classList.add("details");let a=document.createElement("h3");a.textContent="title: "+o.title;let r=document.createElement("h4");r.textContent="Description: "+o.description;let s=document.createElement("h4");s.textContent="Due Date: "+o.dueDate;let d=document.createElement("h4");d.textContent="Priority: "+o.priority;let i=document.createElement("h4");i.textContent="Notes: "+o.notes,c.append(a),c.append(r),c.append(s),c.append(d),c.append(i),n.replaceWith(c)},renderNewProject(e){let t=document.getElementsByClassName("projectdiv"),n=document.querySelector(".projects"),o=document.querySelector(".newprojectbtn"),c=document.createElement("div"),a=document.createElement("button"),r=document.createElement("div");a.classList.add("collapsible"),r.classList.add("content"),a.textContent=e,l.createProject(e),c.id=t.length,c.classList.add("projectdiv"),c.append(a);let s=document.createElement("button");s.textContent="+ Add Task",s.classList.add("newtaskbtn"),r.append(s),n.insertBefore(c,o),c.append(r)},replaceProjects(n){let o={projectTitle:n,tasks:[]};e.push(o);let c=document.querySelector(".projects"),a=(document.querySelectorAll(".pointerStyle"),e),r=document.createElement("div");for(let e=0;e<a.length;e++){let t=document.createElement("div"),n=document.createElement("button"),l=document.createElement("div");l.classList.add("content"),n.classList.add("collapsible"),n.textContent=a[e].projectTitle,t.id=e,t.classList.add("projectdiv"),t.append(n),t.append(l),r.append(t)}let d=document.createElement("button");d.textContent="+ Add Project",d.classList.add("newprojectbtn"),r.append(d),c.replaceWith(r),r.classList.add("projects"),d.addEventListener("click",(()=>{s.classList.add("spawn")})),r.addEventListener("click",(function(e){e.target.classList.contains("pointerstyle")&&l.renderTasksDetail(e.target.textContent,e.target.getAttribute("data-folder"))})),document.querySelectorAll(".projects").forEach((e=>e.addEventListener("click",(function(e){e.target.classList.contains("newtaskbtn")&&document.querySelector(".inputinfo").classList.add("spawn")})))),t()},renderNewTask(t,n,l,o,c,a){for(let r=0;r<e.length;r++)e[r].projectTitle==a&&e[r].tasks.push({title:t,description:n,dueDate:l,priority:o,notes:c,checklist:!1})},updateTasksTitle(e){let t=document.querySelectorAll(".projects");document.querySelectorAll(".content");for(let e=0;e<t.length;e++)t[e].firstElementChild.textContent;var n=document.querySelectorAll(".collapsible");for(let e=0;e<n.length;e++){let t=n[e].textContent,o=l.getTitle(t);for(let t=0;t<o.length;t++){let l=document.createElement("h3");l.textContent=String(o[t]),l.classList.add("pointerstyle"),l.setAttribute("data-folder",n[e].textContent),n[e].nextElementSibling.append(l)}}}}})();l.renderProjects(),l.renderTasksCollapsibleContainer(),l.renderTasksTittle();let o=document.querySelector(".newprojectbtn"),c=document.querySelector(".cancelbtnproject"),a=document.querySelector(".submitbtnproject"),r=document.getElementById("projectnamefield"),s=document.querySelector(".projectform"),d=document.querySelectorAll(".projects"),i=document.querySelector(".cancelbtninfo"),u=document.querySelector(".submitbtninfo");d.forEach((e=>e.addEventListener("click",(function(e){e.target.classList.contains("newtaskbtn")&&document.querySelector(".inputinfo").classList.add("spawn")})))),i.addEventListener("click",(e=>{e.preventDefault(),document.querySelector(".inputinfo").classList.remove("spawn")})),n.addEventListener("click",(function(e){e.target.classList.contains("pointerstyle")&&l.renderTasksDetail(e.target.textContent,e.target.getAttribute("data-folder"))})),o.addEventListener("click",(()=>{s.classList.add("spawn")})),c.addEventListener("click",(e=>{e.preventDefault(),r.value="",s.classList.remove("spawn")})),a.addEventListener("click",(e=>{e.preventDefault();let t=document.querySelector(".nameerrorpopup");l.getList().some((e=>e.projectTitle===r.value))?t.classList.add("spawn"):""!=r.value&&(l.replaceProjects(r.value),l.renderTasksCollapsibleContainer(),l.renderTasksTittle(),s.classList.remove("spawn"),function(){document.querySelector(".inputinfo");let e=document.querySelector(".folderselection"),t=document.getElementsByClassName("collapsible");document.createElement("h3").textContent="Folder";let n=document.createElement("SELECT");for(let e=0;e<Array.from(t).length;e++){let l=document.createElement("OPTION");l.value=t[e].textContent,l.text=t[e].textContent,n.add(l,null)}n.classList.add("folderselection"),e.replaceWith(n)}())})),function(){let e=document.querySelector(".inputinfo"),t=document.querySelector(".cancelbtninfo"),n=document.getElementsByClassName("collapsible");document.createElement("h3").textContent="Folder";let l=document.createElement("SELECT");for(let e=0;e<Array.from(n).length;e++){let t=document.createElement("OPTION");t.value=n[e].textContent,t.text=n[e].textContent,l.add(t,null)}l.classList.add("folderselection"),e.insertBefore(l,t)}(),u.addEventListener("click",(e=>{let t=document.querySelector(".titleinputvalue"),n=document.querySelector(".descriptioninputvalue"),o=document.querySelector(".dateinputvalue"),c=document.querySelector(".priorityinputvalue"),a=document.querySelector(".notesinputvalue"),r=document.querySelector(".folderselection");""!=t.value&&(l.renderNewTask(t.value,n.value,o.value,c.value,a.value,r.value),l.renderTasksTittle(r))}))})();